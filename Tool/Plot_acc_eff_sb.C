#include "CMS_lumi.h"

void Plot_acc_eff_sb()
{
 double err_acc_mu[84];
 double err_acc_el[84];

  double ttbar_mus_acc[84] = {0.782078,0.832794,0.84547,0.891908,0.912939,0.77848,0.781545,0.859236,0.853415,0.840614,0.806399,0.800198,0.848331,0.938134,0.911118,0.847717,0.840538,0.860095,0.799961,0.844725,0.894372,0.799611,0.835843,0.842955,0.803319,0.866169,0.803749,0.703399,0.825038,0.786609,0.807629,0.828738,0.882303,0.911172,0.929882,0.9632,0.774442,0.781471,0.754061,0.725711,0.94071,0.874611,0.860046,0.85388,0.772502,0.915475,0.84176,0.939116,0.918657,0.948766,0.944007,0.945897,0.808416,0.860068,0.895743,0.910783,0.795116,0.846736,0.905423,0.919898,0.941753,0.958494,0.80175,0.852255,0.933809,0.795406,0.833465,0.847783,0.969876,0.830997,0.887594,0.862694,0.987645,0.88935,0.898245,0.893793,0.941655,0.934214,0.915693,0.958764,0.973681,0.819293,0.97155,0.977083};

  double ttbar_els_acc[84] = {0.796645,0.826848,0.846874,0.854893,0.845223,0.79733,0.779059,0.800175,0.898012,0.842711,0.785149,0.777837,0.807476,0.941625,0.912233,0.880172,0.817731,0.885087,0.962655,0.932094,0.892648,0.796412,0.806848,0.875736,0.774997,0.864047,0.80618,0.802467,0.868117,0.918219,0.898213,0.902169,0.912748,0.839107,0.906125,0.61638,0.90432,0.755983,0.803199,0.831157,0.699148,0.85657,0.8372,0.812487,0.807285,0.859322,0.898584,0.873767,0.884628,0.904158,0.895756,0.882666,0.789989,0.780784,0.886407,0.833375,0.85099,0.827151,0.906764,0.880177,0.911781,0.957564,0.813453,0.849991,0.849762,0.799984,0.771181,0.816474,0.951567,0.809553,0.855539,0.718188,0.939812,0.848473,0.962864,0.922024,0.905066,0.901811,0.915945,0.8699,0.920726,0.889512,0.857331,0.893857};

err_acc_mu[0] = 0.0031975602539;
err_acc_mu[1] = 0.011979581625;
err_acc_mu[2] = 0.022985864466;
err_acc_mu[3] = 0.030795847411;
err_acc_mu[4] = 0.016625364953;
err_acc_mu[5] = 0.0042962787813;
err_acc_mu[6] = 0.014602181939;
err_acc_mu[7] = 0.022860086286;
err_acc_mu[8] = 0.036905580972;
err_acc_mu[9] = 0.0096935802078;
err_acc_mu[10] = 0.012916550254;
err_acc_mu[11] = 0.026483628749;
err_acc_mu[12] = 0.036608133021;
err_acc_mu[13] = 0.0231241498;
err_acc_mu[14] = 0.028173991787;
err_acc_mu[15] = 0.028124228117;
err_acc_mu[16] = 0.02831851019;
err_acc_mu[17] = 0.038833190842;
err_acc_mu[18] = 0.090354237631;
err_acc_mu[19] = 0.085724539457;
err_acc_mu[20] = 0.02871035534;
err_acc_mu[21] = 0.0042584807273;
err_acc_mu[22] = 0.013759592869;
err_acc_mu[23] = 0.028386011272;
err_acc_mu[24] = 0.043408449836;
err_acc_mu[25] = 0.066897449167;
err_acc_mu[26] = 0.012548174623;
err_acc_mu[27] = 0.036571587326;
err_acc_mu[28] = 0.057670100418;
err_acc_mu[29] = 0.081366113976;
err_acc_mu[30] = 0.044419394889;
err_acc_mu[31] = 0.031349221994;
err_acc_mu[32] = 0.035675775607;
err_acc_mu[33] = 0.028758609897;
err_acc_mu[34] = 0.036675001657;
err_acc_mu[35] = 0.022628010603;
err_acc_mu[36] = 0.13322844847;
err_acc_mu[37] = 0.011716669566;
err_acc_mu[38] = 0.027765471163;
err_acc_mu[39] = 0.061800690829;
err_acc_mu[40] = 0.046953363633;
err_acc_mu[41] = 0.014498089425;
err_acc_mu[42] = 0.025536904137;
err_acc_mu[43] = 0.042727857494;
err_acc_mu[44] = 0.081983207878;
err_acc_mu[45] = 0.0074771731045;
err_acc_mu[46] = 0.042636118411;
err_acc_mu[47] = 0.016235651848;
err_acc_mu[48] = 0.0067757035499;
err_acc_mu[49] = 0.011149435507;
err_acc_mu[50] = 0.021931413228;
err_acc_mu[51] = 0.013977093319;
err_acc_mu[52] = 0.013926283133;
err_acc_mu[53] = 0.024156170597;
err_acc_mu[54] = 0.031579384595;
err_acc_mu[55] = 0.029138162771;
err_acc_mu[56] = 0.063560676219;
err_acc_mu[57] = 0.07461549043;
err_acc_mu[58] = 0.0076987571178;
err_acc_mu[59] = 0.015099366242;
err_acc_mu[60] = 0.026919274156;
err_acc_mu[61] = 0.013611365948;
err_acc_mu[62] = 0.017067048518;
err_acc_mu[63] = 0.032178383367;
err_acc_mu[64] = 0.027547455611;
err_acc_mu[65] = 0.038369768354;
err_acc_mu[66] = 0.07628245496;
err_acc_mu[67] = 0.073335934765;
err_acc_mu[68] = 0.013714009262;
err_acc_mu[69] = 0.077111172676;
err_acc_mu[70] = 0.025814067885;
err_acc_mu[71] = 0.054580264422;
err_acc_mu[72] = 0.0080665382127;
err_acc_mu[73] = 0.026144589799;
err_acc_mu[74] = 0.036687447743;
err_acc_mu[75] = 0.023923601516;
err_acc_mu[76] = 0.011456799428;
err_acc_mu[77] = 0.021474426923;
err_acc_mu[78] = 0.038361099914;
err_acc_mu[79] = 0.013351351376;
err_acc_mu[80] = 0.0098740016831;
err_acc_mu[81] = 0.11568891246;
err_acc_mu[82] = 0.011389148362;
err_acc_mu[83] = 0.013347722305;
err_acc_el[0] = 0.0031255570166;
err_acc_el[1] = 0.012009099183;
err_acc_el[2] = 0.022702622903;
err_acc_el[3] = 0.035065991629;
err_acc_el[4] = 0.037161591849;
err_acc_el[5] = 0.0041280213331;
err_acc_el[6] = 0.014778749216;
err_acc_el[7] = 0.026762268738;
err_acc_el[8] = 0.022848148457;
err_acc_el[9] = 0.0091916361499;
err_acc_el[10] = 0.013374250071;
err_acc_el[11] = 0.025209324062;
err_acc_el[12] = 0.036902623295;
err_acc_el[13] = 0.01872093457;
err_acc_el[14] = 0.026298698259;
err_acc_el[15] = 0.023384524859;
err_acc_el[16] = 0.031918452563;
err_acc_el[17] = 0.055200914168;
err_acc_el[18] = 0.032150307882;
err_acc_el[19] = 0.024131294449;
err_acc_el[20] = 0.036978529835;
err_acc_el[21] = 0.0042624853745;
err_acc_el[22] = 0.01518280112;
err_acc_el[23] = 0.022550865878;
err_acc_el[24] = 0.050347955695;
err_acc_el[25] = 0.059734323372;
err_acc_el[26] = 0.012486509794;
err_acc_el[27] = 0.028732574273;
err_acc_el[28] = 0.038750851713;
err_acc_el[29] = 0.030323425421;
err_acc_el[30] = 0.028329448447;
err_acc_el[31] = 0.021462646388;
err_acc_el[32] = 0.027056584829;
err_acc_el[33] = 0.066128361991;
err_acc_el[34] = 0.043875697039;
err_acc_el[35] = 0.15373202285;
err_acc_el[36] = 0.040204535532;
err_acc_el[37] = 0.012507158285;
err_acc_el[38] = 0.026433001657;
err_acc_el[39] = 0.051615419215;
err_acc_el[40] = 0.14177933959;
err_acc_el[41] = 0.016178321112;
err_acc_el[42] = 0.030353227006;
err_acc_el[43] = 0.04898384007;
err_acc_el[44] = 0.063294423612;
err_acc_el[45] = 0.026008250274;
err_acc_el[46] = 0.011518191681;
err_acc_el[47] = 0.029508493319;
err_acc_el[48] = 0.007966015611;
err_acc_el[49] = 0.016371872735;
err_acc_el[50] = 0.032985554137;
err_acc_el[51] = 0.049610193954;
err_acc_el[52] = 0.015031914025;
err_acc_el[53] = 0.026602878379;
err_acc_el[54] = 0.028598913087;
err_acc_el[55] = 0.038261933544;
err_acc_el[56] = 0.044370065416;
err_acc_el[57] = 0.081977535367;
err_acc_el[58] = 0.0075797411411;
err_acc_el[59] = 0.021029015265;
err_acc_el[60] = 0.031886794315;
err_acc_el[61] = 0.012547759603;
err_acc_el[62] = 0.017555147737;
err_acc_el[63] = 0.031208582495;
err_acc_el[64] = 0.048899917418;
err_acc_el[65] = 0.030509504955;
err_acc_el[66] = 0.084748272026;
err_acc_el[67] = 0.05610430024;
err_acc_el[68] = 0.021383942101;
err_acc_el[69] = 0.089987884756;
err_acc_el[70] = 0.027250912214;
err_acc_el[71] = 0.074439617075;
err_acc_el[72] = 0.024095701793;
err_acc_el[73] = 0.035181989448;
err_acc_el[74] = 0.0088213755168;
err_acc_el[75] = 0.010238084813;
err_acc_el[76] = 0.01734789347;
err_acc_el[77] = 0.02460800152;
err_acc_el[78] = 0.039657742149;
err_acc_el[79] = 0.077017928033;
err_acc_el[80] = 0.029530346016;
err_acc_el[81] = 0.048013822943;
err_acc_el[82] = 0.084795192979;
err_acc_el[83] = 0.049195229213;

 const std::string titre="CMS Supplementary";

  TCanvas *c1 = new TCanvas("c1", "c1",0,51,1920,1004);
  c1->SetFillColor(0);
  c1->cd();

  TH1D *h_mu_iso_eff = new TH1D("h_mu_iso_eff", "h_mu_iso_eff", 84 , 0 , 84);
  h_mu_iso_eff->SetTitle("");
  h_mu_iso_eff->SetXTitle("Search region bin number");
  h_mu_iso_eff->SetYTitle("acceptance");
  h_mu_iso_eff->SetStats(0);
  h_mu_iso_eff->SetLineWidth(3);
  h_mu_iso_eff->SetMinimum(0.0);

  for (Int_t sbc=1;sbc<=84;++sbc) {
    h_mu_iso_eff->SetBinContent(sbc,ttbar_mus_acc[sbc-1]);
    h_mu_iso_eff->SetBinError(sbc,err_acc_mu[sbc-1]);
    //h_mu_iso_eff->SetBinContent(sbc,sbc);
  }

  gStyle->SetPaintTextFormat("1.2f");
  h_mu_iso_eff->Draw();

  TH1D *h_e_iso_eff = new TH1D("h_e_iso_eff", "h_e_iso_eff", 84 , 0 , 84);
  h_e_iso_eff->SetLineColor(2);
  h_e_iso_eff->SetLineWidth(3);

  for (Int_t sbc=1;sbc<=84;++sbc) {
    h_e_iso_eff->SetBinContent(sbc,ttbar_els_acc[sbc-1]);
    h_e_iso_eff->SetBinError(sbc,err_acc_el[sbc-1]);
    //h_mu_iso_eff->SetBinContent(sbc,sbc);
  }
  h_e_iso_eff->Draw("same");


//  TLatex *title = new TLatex(0.09770115,0.9194915,titre.c_str());
//  title->SetNDC();
//  title->SetTextSize(0.045);
//  title->Draw("same");
//
//   TLatex *   tex2 = new TLatex(0.8127615,0.9178645,"(13 TeV)");
//tex2->SetNDC();
//   tex2->SetTextSize(0.045);
//   tex2->SetLineWidth(2);
//   tex2->Draw();
   CMSStylePlot::CMS_lumi( c1, 0, 0 );


  TLegend* leg = new TLegend(0.6,0.15,0.9,0.27);
  leg->SetBorderSize(0);
  leg->SetTextFont(42);
  leg->SetFillColor(0);
  leg->AddEntry(h_mu_iso_eff,"Muons","l");
  leg->AddEntry(h_e_iso_eff,"Electrons","l");
  leg->Draw("same");


  c1->SaveAs( "acc_eff_84bins.pdf" );

}

#include "CMS_lumi.h"

void Plot_acc_sb_preap()
{
 double err_acc[84];
 double err_acc_el[84];


//  const double ttbar_mus_acc[37] = {0.833188,0.813335,0.830735,0.839931,0.846007,0.808412,0.791037,0.863016,0.856822,0.745926,0.741275,0.837696,0.819089,0.811669,0.83177,0.8392,0.802207,0.759466,0.838426,0.839024,0.78539,0.907118,0.898193,0.945786,0.849418,0.840731,0.897796,0.809444,0.850811,0.910869,0.910453,0.948242,0.857614,0.842478,0.902275,0.830653,0.836152};
double ttbar_mus_acc[84] = {0.780193,0.82393,0.835125,0.769594,0.92018298817,0.779563,0.812786,0.860071,0.856293,0.838565,0.797106,0.805551,0.739294,0.8693357056,0.847759,0.862227,0.823519,0.92018298817,0.83023204195,0.83023204195,0.72810308556,0.786707,0.836489,0.886124,0.791415,0.92762955774,0.82535,0.768684,0.924996,0.91924762334,0.839694,0.891171,0.648817,0.7681374129,0.98157375349,0.98157375349,0.92762955774,0.777854,0.751782,0.855028,0.85675474408,0.874987,0.726759,0.875533,0.699366,0.868238,0.916838,0.91870532928,0.912479,0.947013,0.943535,0.91613353663,0.815765,0.8287  ,0.921988,0.8453  ,0.816404,0.91613353663,0.922984,0.925083,0.978797,0.93268490502,0.805151,0.83331,0.830446,0.819422,0.889238,0.93268490502,0.88376,0.82742708279,0.850515,0.813213,0.91549745287,0.899288,0.933333,0.917803,1,0.91549745287,0.915387,0.92552234269,0.974176,0.96126901587,0.98633526132,0.98633526132};

//  const double ttbar_els_acc[37] = {0.847301,0.81815,0.823032,0.849582,0.847771,0.797805,0.818129,0.855029,0.870859,0.814914,0.759492,0.831736,0.821877,0.799215,0.751261,0.844663,0.811157,0.792653,0.765419,0.820682,0.701654,0.91088,0.905967,0.931121,0.843057,0.848582,0.895733,0.882179,0.828121,0.903091,0.921523,0.930069,0.844546,0.839703,0.863359,0.875123,0.788378};
double ttbar_els_acc[84] = {0.783808,0.822412,0.819415,0.869192,0.81225645483,0.801268,0.793529,0.847683,0.807488,0.823154,0.795892,0.795172,0.880392,0.91777690471,0.910419,0.830248,0.819692,0.81225645483,0.88581878044,0.88581878044,0.88581878044,0.809308,0.819631,0.868003,0.699888,0.944690084,0.839415,0.796494,0.797563,0.74976375022,0.747043,0.802366,0.827576,0.81182570731,0.91527731034,0.91527731034,0.944690084,0.788042,0.788136,0.781693,0.795206077,0.867721,0.843156,0.817941,0.88733,0.874958,0.908222,0.91221164719,0.886755,0.921615,0.781377,0.96731901867,0.79078,0.862422,0.868224,0.892126,0.835305,0.96731901867,0.911929,0.906479,0.907165,0.93145303237,0.81403,0.885412,0.824022,0.789837,0.689519,0.93145303237,0.815704,0.79974031804,0.812691,0.822507,0.92848121132,0.932499,0.953683,0.899394,0.920393,0.92848121132,0.916087,0.90494159848,0.787582,0.80155764506,0.75807141613,0.75807141613};


err_acc[0] = 0.0030850825321;
err_acc[1] = 0.011584190572;
err_acc[2] = 0.021808458217;
err_acc[3] = 0.045591626577;
err_acc[4] = 0.019975953385;
err_acc[5] = 0.003876330405;
err_acc[6] = 0.011926500871;
err_acc[7] = 0.021066269762;
err_acc[8] = 0.033453822628;
err_acc[9] = 0.0085162451336;
err_acc[10] = 0.01061074895;
err_acc[11] = 0.017535397156;
err_acc[12] = 0.031097509916;
err_acc[13] = 0.027547394035;
err_acc[14] = 0.032530105573;
err_acc[15] = 0.022565610645;
err_acc[16] = 0.02324741829;
err_acc[17] = 0.019975953385;
err_acc[18] = 0.058791995139;
err_acc[19] = 0.058791995139;
err_acc[20] = 0.026045291936;
err_acc[21] = 0.0042885385656;
err_acc[22] = 0.014359318567;
err_acc[23] = 0.029332072899;
err_acc[24] = 0.053501786865;
err_acc[25] = 0.036820481036;
err_acc[26] = 0.012107269912;
err_acc[27] = 0.029597543629;
err_acc[28] = 0.049563698977;
err_acc[29] = 0.040137104637;
err_acc[30] = 0.033527067618;
err_acc[31] = 0.028454696663;
err_acc[32] = 0.045634005473;
err_acc[33] = 0.033190855742;
err_acc[34] = 0.055905024172;
err_acc[35] = 0.055905024172;
err_acc[36] = 0.036820481036;
err_acc[37] = 0.010834215401;
err_acc[38] = 0.02538232187;
err_acc[39] = 0.054160271248;
err_acc[40] = 0.046801097706;
err_acc[41] = 0.021275598697;
err_acc[42] = 0.042452243603;
err_acc[43] = 0.065825709422;
err_acc[44] = 0.083737227101;
err_acc[45] = 0.037197330138;
err_acc[46] = 0.038678792172;
err_acc[47] = 0.0306402083;
err_acc[48] = 0.0084934703801;
err_acc[49] = 0.020360011962;
err_acc[50] = 0.051599497183;
err_acc[51] = 0.042923045252;
err_acc[52] = 0.015385563496;
err_acc[53] = 0.02753867335;
err_acc[54] = 0.041957794438;
err_acc[55] = 0.045152232443;
err_acc[56] = 0.05922960541;
err_acc[57] = 0.042923045252;
err_acc[58] = 0.0082642040662;
err_acc[59] = 0.019103618115;
err_acc[60] = 0.037194063398;
err_acc[61] = 0.066159059914;
err_acc[62] = 0.018308124547;
err_acc[63] = 0.037623594416;
err_acc[64] = 0.075074262082;
err_acc[65] = 0.034475234886;
err_acc[66] = 0.084264803331;
err_acc[67] = 0.066159059914;
err_acc[68] = 0.084264803331;
err_acc[69] = 0.063336474328;
err_acc[70] = 0.026405960983;
err_acc[71] = 0.066804934797;
err_acc[72] = 0.075420380641;
err_acc[73] = 0.034690964299;
err_acc[74] = 0.05152293222;
err_acc[75] = 0.054101524666;
err_acc[76] = 0.048459097535;
err_acc[77] = 0.075420380641;
err_acc[78] = 0.076679250861;
err_acc[79] = 0.057095824767;
err_acc[80] = 0.050685863704;
err_acc[81] = 0.040984693711;
err_acc[82] = 0.083173123096;
err_acc[83] = 0.083173123096;
err_acc_el[0] = 0.0030650286457;
err_acc_el[1] = 0.011803278826;
err_acc_el[2] = 0.022696389291;
err_acc_el[3] = 0.032940491798;
err_acc_el[4] = 0.021133283776;
err_acc_el[5] = 0.0037522592267;
err_acc_el[6] = 0.01178683353;
err_acc_el[7] = 0.020549548232;
err_acc_el[8] = 0.035508027434;
err_acc_el[9] = 0.0084793557951;
err_acc_el[10] = 0.010851176881;
err_acc_el[11] = 0.019000624174;
err_acc_el[12] = 0.029502419402;
err_acc_el[13] = 0.0273689614;
err_acc_el[14] = 0.034099407615;
err_acc_el[15] = 0.021067606868;
err_acc_el[16] = 0.02262508556;
err_acc_el[17] = 0.021133283776;
err_acc_el[18] = 0.023861909166;
err_acc_el[19] = 0.023861909166;
err_acc_el[20] = 0.023861909166;
err_acc_el[21] = 0.0042390857874;
err_acc_el[22] = 0.015807786761;
err_acc_el[23] = 0.029880272034;
err_acc_el[24] = 0.06457842547;
err_acc_el[25] = 0.040401823005;
err_acc_el[26] = 0.011894506074;
err_acc_el[27] = 0.027575116682;
err_acc_el[28] = 0.056554249932;
err_acc_el[29] = 0.045672940351;
err_acc_el[30] = 0.03322852243;
err_acc_el[31] = 0.029699552605;
err_acc_el[32] = 0.044279264726;
err_acc_el[33] = 0.033014790447;
err_acc_el[34] = 0.065458512989;
err_acc_el[35] = 0.065458512989;
err_acc_el[36] = 0.040401823005;
err_acc_el[37] = 0.011213076289;
err_acc_el[38] = 0.02571457533;
err_acc_el[39] = 0.061094064656;
err_acc_el[40] = 0.050099829852;
err_acc_el[41] = 0.02174848813;
err_acc_el[42] = 0.038085735582;
err_acc_el[43] = 0.069332540259;
err_acc_el[44] = 0.068479028757;
err_acc_el[45] = 0.037747510972;
err_acc_el[46] = 0.044782537467;
err_acc_el[47] = 0.036222121775;
err_acc_el[48] = 0.0091670655069;
err_acc_el[49] = 0.021860791047;
err_acc_el[50] = 0.036890327705;
err_acc_el[51] = 0.028134846173;
err_acc_el[52] = 0.01635362378;
err_acc_el[53] = 0.024715888754;
err_acc_el[54] = 0.047086415888;
err_acc_el[55] = 0.040965729494;
err_acc_el[56] = 0.060234526902;
err_acc_el[57] = 0.028134846173;
err_acc_el[58] = 0.0080376201449;
err_acc_el[59] = 0.022646519153;
err_acc_el[60] = 0.058460774515;
err_acc_el[61] = 0.06768131854;
err_acc_el[62] = 0.018883382241;
err_acc_el[63] = 0.034161409371;
err_acc_el[64] = 0.083705213062;
err_acc_el[65] = 0.037776995407;
err_acc_el[66] = 0.11903320541;
err_acc_el[67] = 0.06768131854;
err_acc_el[68] = 0.099336389795;
err_acc_el[69] = 0.070582579423;
err_acc_el[70] = 0.028320962684;
err_acc_el[71] = 0.07000695601;
err_acc_el[72] = 0.083173123096;
err_acc_el[73] = 0.02849060413;
err_acc_el[74] = 0.050615698405;
err_acc_el[75] = 0.054762784697;
err_acc_el[76] = 0.069055532109;
err_acc_el[77] = 0.083173123096;
err_acc_el[78] = 0.068254605285;
err_acc_el[79] = 0.05833834218;
err_acc_el[80] = 0.072702317081;
err_acc_el[81] = 0.064784598657;
err_acc_el[82] = 0.10857592821;
err_acc_el[83] = 0.10857592821;

 const std::string titre="CMS Supplementary";

  TCanvas *c1 = new TCanvas("c1", "c1",0,51,1920,1004);
  c1->SetFillColor(0);
  c1->cd();

  TH1D *h_mu_iso_eff = new TH1D("h_mu_iso_eff", "h_mu_iso_eff", 84 , 0 , 84);
  h_mu_iso_eff->SetTitle("");
  h_mu_iso_eff->SetXTitle("Search region bin number");
  h_mu_iso_eff->SetYTitle("acceptance");
  h_mu_iso_eff->SetStats(0);
  h_mu_iso_eff->SetLineWidth(3);
  h_mu_iso_eff->SetMinimum(0.0);

  for (Int_t sbc=1;sbc<=84;++sbc) {
    h_mu_iso_eff->SetBinContent(sbc,ttbar_mus_acc[sbc-1]);
    h_mu_iso_eff->SetBinError(sbc,err_acc[sbc-1]);
    //h_mu_iso_eff->SetBinContent(sbc,sbc);
  }

  gStyle->SetPaintTextFormat("1.2f");
  h_mu_iso_eff->Draw();

  TH1D *h_e_iso_eff = new TH1D("h_e_iso_eff", "h_e_iso_eff", 84 , 0 , 84);
  h_e_iso_eff->SetLineColor(2);
  h_e_iso_eff->SetLineWidth(3);

  for (Int_t sbc=1;sbc<=84;++sbc) {
    h_e_iso_eff->SetBinContent(sbc,ttbar_els_acc[sbc-1]);
    h_e_iso_eff->SetBinError(sbc,err_acc_el[sbc-1]);
    //h_mu_iso_eff->SetBinContent(sbc,sbc);
  }
  h_e_iso_eff->Draw("same");


//  TLatex *title = new TLatex(0.09770115,0.9194915,titre.c_str());
//  title->SetNDC();
//  title->SetTextSize(0.045);
//  title->Draw("same");
//
//   TLatex *   tex2 = new TLatex(0.8127615,0.9178645,"(13 TeV)");
//tex2->SetNDC();
//   tex2->SetTextSize(0.045);
//   tex2->SetLineWidth(2);
//   tex2->Draw();
   CMSStylePlot::CMS_lumi( c1, 0, 0 );


  TLegend* leg = new TLegend(0.6,0.15,0.9,0.27);
  leg->SetBorderSize(0);
  leg->SetTextFont(42);
  leg->SetFillColor(0);
  leg->AddEntry(h_mu_iso_eff,"Muons","l");
  leg->AddEntry(h_e_iso_eff,"Electrons","l");
  leg->Draw("same");


  c1->SaveAs( "v6_acc_eff_84bins.pdf" );

}
